<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8"> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Escape - Web agency</title>
    <meta name="description" content="Escape Web agency - We make beautiful and original websites">
    
    <!-- Normalisation du CSS (CSS reset) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css" rel="stylesheet">
    <link href="public/css/css_reset.css" rel="stylesheet">

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link href="public/css/style.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body id="page-top" data-spy="scroll" data-target=".navbar">
    <div class="container-fluid">
        <header>

            <!-- Navigation
            ================================================== -->

            <div class="container wide-container">
                <nav class="navbar navbar-fixed-top row" id="header-nav" role="navigation">
                    <div class="navbar-header col-lg-2">
                        <button type="button" data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a href="#page-top"><img src="public/images/logo_escape.png"></a>
                    </div>
                    <div class="collapse navbar-collapse pull-right">
                        <ul class="nav navbar-nav">
                            <li class="active"><a href="#page-top">Home</a></li>
                            <li><a href="#services-anchor">Blog</a></li>
                            <li><a href="#contact-anchor">Contact</a></li>
                        </ul>
                    </div>
                </nav>
            </div>

        </header>

        <!-- Home
        ================================================== -->

        <div id="home" class="row">
            <img src="public/images/home.png">
            <div id="home-text" class="col-xs-12 text-center">
                <h2><span class="light">Can you build the website of my dreams?</span></h2>
                <h1><span class="bold">Yup, we can do that.</span></h1>
                <div id="learn-more" class="col-lg-12 text-center"><span class="medium">Learn More</span></div>
            </div>
        </div>

    </div>

    <!-- Corps de page
    ================================================== -->

    <div class="container" id="services">
        <a class="anchor" id="services-anchor"></a>
        <section class="row vertical-center" id="wed-development">
            <div class="col-xs-12 col-md-8 h-240">
                <h1 class="mg-35"><span class="light">Web</span> <span class="bold">Development</span></h1>
                <p class="mg-30">Proin iaculis purus consequat sem cure digni ssim. Donec porttitora entum suscipit aenean rhoncus posuere odio in tincidunt. Proin iaculis purus consequat sem cure digni ssim. Donec porttitora entum suscipit aenean rhoncus posuere odio in tincidunt.</p>
                <p>Iaculis purus consequat sem cure digni ssim. Donec porttitora entum suscipit aenean rhoncus posuere odio in tincidunt. Proin iaculis purus consequat sem cure digni ssim.</p>
            </div>
            <div class="col-md-4 hidden-xs skill-image">
                <img src="public/images/web_development.png" class="pull-right">
            </div>
        </section>
    </div>
    <div class="container-fluid gray-bg">
        <div class="container">
            <section class="row vertical-center" id="identity-branding">
                <div class="col-md-4 hidden-xs skill-image">
                    <img src="public/images/identity_branding.png">
                </div>
                <div class="col-xs-12 col-md-8 h-240" id="id-brand-desc">
                    <h1 class="mg-35"><span class="light">Identity</span> <span class="bold">Branding</span></h1>
                    <p class="mg-30">Proin iaculis purus consequat sem cure digni ssim. Donec porttitora entum suscipit aenean rhoncus posuere odio in tincidunt. Proin iaculis purus consequat sem cure digni ssim. Donec porttitora entum suscipit.</p>
                    <p>Iaculis purus consequat sem cure digni ssim. Donec porttitora entum suscipit aenean rhoncus posuere odio in tincidunt. Proin iaculis purus consequat.</p>
                </div>
            </section>
        </div>
    </div>


    <div class="container-fluid blue-bg">
        <div class="container wide-container" id="contact-container">
            <a class="anchor" id="contact-anchor"></a>
            <section class="row blue-bg" id="contact">
                <div class="col-xs-12 col-md-6 no-outer-pad">
                    <h1><span class="light">Say</span> <span class="bold">Hello</span></h1>
                    <p>Don’t be shy, drop us an email and say hello! We are a really nice bunch of people :)</p>
                    <div class="row" id ="contact-info">
                        <div class="col-xs-6 row">
                            <div class="col-xs-2 pull-left">
                                <i class="fa fa-mobile fa-2x"></i>
                            </div>
                            <div class="col-xs-10">
                                <span>(416) 555-0000</span>
                            </div>
                        </div>
                        <div class="col-xs-6 row">
                            <div class="col-xs-2 pull-left">
                                <i class="fa fa-envelope fa-2x"></i>
                            </div>
                            <div class="col-xs-10">
                                <span>hello@escape.com</span>
                            </div>
                        </div>
                        <div class="col-xs-6 row">
                            <div class="col-xs-2 pull-left">
                                <i class="fa fa-twitter fa-2x"></i>
                            </div>
                            <div class="col-xs-10">
                                <span>@escape</span>
                            </div>
                        </div>
                        <div class="col-xs-6 row">
                            <div class="col-xs-2 pull-left">
                                <i class="fa fa-facebook fa-2x"></i>
                            </div>
                            <div class="col-xs-10">
                                <span>facebook.com/escape</span>
                            </div>
                        </div>
                        <div class="col-xs-6 row">
                            <div class="col-xs-2 pull-left">
                                <i class="fa fa-google-plus fa-2x"></i>
                            </div>
                            <div class="col-xs-10">
                                <span>plus.com/escape</span>
                            </div>
                        </div>
                        <div class="col-xs-6 row">
                            <div class="col-xs-2 pull-left">
                                <i class="fa fa-pinterest-p fa-2x"></i>
                            </div>
                            <div class="col-xs-10">
                                <span>pinterest.com/escape</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-md-6">
                    <form>
                        <div class="col-xs-12 form-line">
                            <div class="form-group">
                                <input type="text" class="form-control" id="name" placeholder="  Your Name *">
                            </div>
                            <div class="form-group">
                                <input type="email" class="form-control" id="email" placeholder="  Your E-mail *">
                            </div>
                            <div class="form-group">
                                <textarea class="form-control" id="message" placeholder="  Your Message *"></textarea>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
        </div>
    </div>

    <!-- Pied de page
    ================================================== -->

    <footer class="container-fluid text-center blue-bg">
        <div class="container wide-container">
            <div class="row">
                <div class="col-xs-12">
                    <p class="medium">© 2014 Escape by FreebiesXpress • Made In Toronto</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Javascript de Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script>

        $(function () {
            $('#header-nav').data('size','big');
            
            // Scrollspy fluide
            $('header a').on('click', function(e) {
                e.preventDefault();
                var hash = this.hash;
                $('html, body').animate({
                    scrollTop: $(this.hash).offset().top
                }, 700, function(){
                    window.location.hash = hash;
                });
            });

            // Fonction de récupération de la hauteur initiale de la div "home", dans son état non "fixed"
            function getHomeHeightInit() {
                var image_url = $('#home').css('background-image'),
                image;
                image_url = image_url.match(/^url\("?(.+?)"?\)$/);
                if (image_url[1]) {
                    image_url = image_url[1];
                    image = new Image();
                    image.src = image_url;
                }
                homeHeightInit = image.height * ($('#home').width() / image.width);
                return homeHeightInit;
            }

            // Fonction de réglage de l'opacité du texte de la div "home" jusqu'à le faire disparaître.
            // Une fois transparent, on met son "display" à "none" pour éviter qu'il n'interfère
            // avec le reste de la page (par exemple en cas de clic sur un élément).
            function setOpacity(currentPos, homeHeightInit) {
                var headOpacity = 0;
                if (currentPos !== 0) {
                    headOpacity = 1 - 1 / ((homeHeightInit / 2) / currentPos);
                } else {
                    headOpacity = 1;
                }
                $('#home span').css('opacity', headOpacity);
                if (headOpacity <= 0) {
                    $('#home span').css('display', 'none');
                } else {
                    $('#home span').css('display', 'inline');
                }
            }

            // Modification de l'affichage de l'entête lors du scroll.
            // Le but est de rendre "fixed" une partie de la div contenant l'image d'entête
            // puis de rétrécir le menu, à partir d'un seuil de déclenchement.
            $(window).scroll(function(){

                // On mémorise les dimensions initiales de la div "home", dans son état non "fixed"
                var homeHeightInit = getHomeHeightInit();
                var homeWidthInit  = $('#home').width();

                // On récupère la position courante et la hauteur du menu
                var currentPos = $(document).scrollTop();
                var menuHeight = $('#header-nav').height();

                // On récupère la marge haute initiale du menu quand la div "home" n'est pas "fixed", et la
                // même marge lorsque "home" est "fixed" (valeurs différentes suivant la largeur d'affichage).
                var navMarginTopInit = (window.matchMedia('(max-width: 767px)').matches) ? 0 : 31;

                // On joue avec l'opacité du texte de la div "home" jusqu'à le faire disparaître.
                setOpacity(currentPos, homeHeightInit);

                // Calcul de la position de déclenchement.
                var triggerPos = homeHeightInit - menuHeight - navMarginTopInit;

                // Si on est au-dessous du point de déclenchement
                if (currentPos > triggerPos) {
                    if($('#header-nav').data('size') == 'big') {
                        $('#header-nav').data('size','small');
                    }
                    // Si on est au dessous du point de déclenchement moins la hauteur du menu, on passe la div
                    // "home" en position "fixed" et on masque son image de fond transparente pour éviter qu'elle
                    // interfère avec le reste de la page (par exemple en cas de clic sur un élément).
                    if (currentPos > homeHeightInit - menuHeight) {
                        $('#home').css('position', 'fixed').css('height', menuHeight + 1).css('width', homeWidthInit);
                        $('#home').css('background-position', 'bottom');
                        $('#header-nav').css('margin-top', '0px');
                        $('#services').css('padding-top', homeHeightInit);
                        $('#home img').css('display', 'none');
                    // Si on est au dessus du point de déclenchement moins la hauteur du menu, on passe la div
                    // "home" en position "relative" et on "démasque" son image de fond transparente.
                    } else {
                        $('#home').css('position', 'relative').css('width', 'auto').css('height', 'auto');
                        $('#home').css('background-position', 'top');
                        $('#header-nav').css('margin-top', homeHeightInit - currentPos - menuHeight + 'px');
                        $('#services').css('padding-top', '0px');
                        $('#home img').css('display', 'inline');
                    }
                    // Si on est au-dessus du point de déclenchement
                } else {
                    if ($('#header-nav').data('size') == 'small') {
                        $('#header-nav').data('size','big');
                        $('#home').css('position', 'relative').css('width', 'auto').css('height', 'auto');
                        $('#home').css('background-position', 'top');
                        $('#services').css('padding-top', '0px');
                        $('#home img').css('display', 'inline');
                    }
                    $('#header-nav').css('margin-top', Math.max(navMarginTopInit , navMarginTopInit - (homeHeightInit - currentPos - menuHeight)) + 'px');
                }
            });
            // Au chargement de la page, on appelle la fonction de scroll pour bien initialiser
            // l'affichage de l'en-tête dans tous les cas (notamment lors d'un rechargement avec F5).
            $(window).on('load', function(){$(window).scroll();});

            // Mise à jour de certains paramètres d'affichage lors du redimensionnement de la page.
            // Si les performances s'en ressentaient, possibilité d'utilier un setTimeout (actuellement désactivé).

            //var resizeTimer;

            function resizeFunction() {
                var currentPos = $(document).scrollTop();
                var homeHeightInit = getHomeHeightInit();
                setOpacity(currentPos, homeHeightInit);
                if (window.matchMedia('(max-width: 767px)').matches) {
                    $('#header-nav').css('margin-top', '0px');
                } else {
                    if ($(document).scrollTop() === 0) {
                        $('#header-nav').css('margin-top', '31px');
                    }
                }
                if ($('#home').css('position') === 'fixed') {
                    $('#home').width($('header').width() + 2 * 15);
                } else {
                    if ($('#home').height() - currentPos <= $('#header-nav').height() + 31) {
                        $(window).scroll();
                    }
                }
            }

            $(window).resize(function() {
                resizeFunction(); // Ligne à commenter si utilisation de clearTimeout et setTimeout.
                /*clearTimeout(resizeTimer);
                resizeTimer = setTimeout(resizeFunction, 100);
                */
            });

        });
    </script>

</body>

</html>
